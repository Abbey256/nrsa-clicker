<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NRSA Championship</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="manifest" href="manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            background-color: #000;
            overflow: hidden;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #skipBtn {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-family: sans-serif;
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            z-index: 10;
        }
    </style>
</head>

<body>

    <video id="introVideo" playsinline muted>
        <source src="logo_animation.mp4" type="video/mp4">
    </video>

    <button id="skipBtn" onclick="finishSplash()">Skip >></button>

    <script>
        // SMART SPLASH LOGIC
        // 1. Check if we've seen it this session
        if (sessionStorage.getItem('splashPlayed') === 'true') {
            window.location.href = 'login.html';
        }

        const video = document.getElementById('introVideo');

        // 2. Play Video
        video.play().catch(e => {
            console.log("Autoplay blocked, showing controls or click to play");
            // If autoplay fails (browser policy), just go to login? 
            // Or let user click. Let's try to play.
        });

        // 3. On End -> Login
        video.addEventListener('ended', finishSplash);

        function finishSplash() {
            sessionStorage.setItem('splashPlayed', 'true');
            window.location.href = 'login.html';
        }

        // Safety: If video stalls or takes too long (e.g. 15s), force redirect
        setTimeout(() => {
            // Only if still here
            if (document.body.contains(video)) {
                // finishSplash(); 
                // actually let's not force it unless it's really stuck, 
                // video duration might be longer. Video ended event is safer.
            }
        }, 30000);

    </script>
</body>

</html>